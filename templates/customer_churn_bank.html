<!-- templates\customer_churn_bank.html -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>銀行客戶流失預測 - 客戶流失預測平台</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/fab_color_control.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/topbar_menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/customer_churn_bank.css') }}">
</head>
<body>

    <header id="topbarMenu">
        <button class="topbar-toggle-button" id="topbarToggleButton">
            <svg class="topbar-toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M471.1 297.4C483.6 309.9 483.6 330.2 471.1 342.7L279.1 534.7C266.6 547.2 246.3 547.2 233.8 534.7C221.3 522.2 221.3 501.9 233.8 489.4L403.2 320L233.9 150.6C221.4 138.1 221.4 117.8 233.9 105.3C246.4 92.8 266.7 92.8 279.2 105.3L471.2 297.3z"/></svg>
        </button>
        <div class="topbar-brand">
            <svg class="topbar-brand-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M184 120C184 89.1 209.1 64 240 64L264 64C281.7 64 296 78.3 296 96L296 544C296 561.7 281.7 576 264 576L232 576C202.2 576 177.1 555.6 170 528C169.3 528 168.7 528 168 528C123.8 528 88 492.2 88 448C88 430 94 413.4 104 400C84.6 385.4 72 362.2 72 336C72 305.1 89.6 278.2 115.2 264.9C108.1 252.9 104 238.9 104 224C104 179.8 139.8 144 184 144L184 120zM456 120L456 144C500.2 144 536 179.8 536 224C536 239 531.9 253 524.8 264.9C550.5 278.2 568 305 568 336C568 362.2 555.4 385.4 536 400C546 413.4 552 430 552 448C552 492.2 516.2 528 472 528C471.3 528 470.7 528 470 528C462.9 555.6 437.8 576 408 576L376 576C358.3 576 344 561.7 344 544L344 96C344 78.3 358.3 64 376 64L400 64C430.9 64 456 89.1 456 120z"/></svg>
            <span class="topbar-brand-text">模型預測網站</span>
        </div>
        <div class="topbar-nav-links">
            <a class="topbar-nav-item {% if request.path == url_for('index') %} active {% endif %}" href="{{ url_for('index') }}" >
                <button class="topbar-nav-button" title="首頁">
                    <svg class="topbar-nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M298.2 72.6C310.5 61.2 329.5 61.2 341.7 72.6L432 156.3L432 144C432 126.3 446.3 112 464 112L496 112C513.7 112 528 126.3 528 144L528 245.5L565.8 280.6C575.4 289.6 578.6 303.5 573.8 315.7C569 327.9 557.2 336 544 336L528 336L528 512C528 547.3 499.3 576 464 576L176 576C140.7 576 112 547.3 112 512L112 336L96 336C82.8 336 71 327.9 66.2 315.7C61.4 303.5 64.6 289.5 74.2 280.6L298.2 72.6zM304 384C277.5 384 256 405.5 256 432L256 528L384 528L384 432C384 405.5 362.5 384 336 384L304 384z"/></svg>
                    <span class="topbar-nav-text">首頁</span>
                </button>
            </a>
            <a class="topbar-nav-item {% if request.path == url_for('customer_churn_bank_page') %} active {% endif %}" href="{{ url_for('customer_churn_bank_page') }}" >
                <button class="topbar-nav-button" title="銀行客戶流失 - 預測分析模型">
                    <svg class="topbar-nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M335.9 84.2C326.1 78.6 314 78.6 304.1 84.2L80.1 212.2C67.5 219.4 61.3 234.2 65 248.2C68.7 262.2 81.5 272 96 272L128 272L128 480L128 480L76.8 518.4C68.7 524.4 64 533.9 64 544C64 561.7 78.3 576 96 576L544 576C561.7 576 576 561.7 576 544C576 533.9 571.3 524.4 563.2 518.4L512 480L512 272L544 272C558.5 272 571.2 262.2 574.9 248.2C578.6 234.2 572.4 219.4 559.8 212.2L335.8 84.2zM464 272L464 480L400 480L400 272L464 272zM352 272L352 480L288 480L288 272L352 272zM240 272L240 480L176 480L176 272L240 272zM320 160C337.7 160 352 174.3 352 192C352 209.7 337.7 224 320 224C302.3 224 288 209.7 288 192C288 174.3 302.3 160 320 160z"/></svg>
                    <span class="topbar-nav-text">客戶流失 銀行</span>
                </button>
            </a>
        </div>
    </header>

    <div class="topbar-content-gap" id="topbarContentGap"></div>

    <div id="customerChurnBank">
        <div class="bank-title">銀行客戶流失 - 預測分析模型</div>
        <div class="bank-card-panel-grid">
            <div class="bank-card bank-input-feature-panel">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M256.1 312C322.4 312 376.1 258.3 376.1 192C376.1 125.7 322.4 72 256.1 72C189.8 72 136.1 125.7 136.1 192C136.1 258.3 189.8 312 256.1 312zM226.4 368C127.9 368 48.1 447.8 48.1 546.3C48.1 562.7 61.4 576 77.8 576L274.3 576L285.2 521.5C289.5 499.8 300.2 479.9 315.8 464.3L383.1 397C355.1 378.7 321.7 368.1 285.7 368.1L226.3 368.1zM332.3 530.9L320.4 590.5C320.2 591.4 320.1 592.4 320.1 593.4C320.1 601.4 326.6 608 334.7 608C335.7 608 336.6 607.9 337.6 607.7L397.2 595.8C409.6 593.3 421 587.2 429.9 578.3L548.8 459.4L468.8 379.4L349.9 498.3C341 507.2 334.9 518.6 332.4 531zM600.1 407.9C622.2 385.8 622.2 350 600.1 327.9C578 305.8 542.2 305.8 520.1 327.9L491.3 356.7L571.3 436.7L600.1 407.9z"/></svg>單筆客戶特徵輸入 (10 項)</div>
                <div class="bank-card-hint">請填寫客戶屬性以計算流失風險。</div>
                <div class="bank-input-form" id="inputForm">
                    
                    <div class="input-field-container">
                        <label class="bank-input-field-title">1. 客戶年齡 ( 18 - 100 歲 )</label>
                        <input class="bank-input-field" type="number" id="input_Age" data-feature-name="Age" value="35" placeholder="在此輸入您的 客戶年齡" title="在此輸入您的 客戶年齡">
                    </div>
                    
                    <div class="input-field-container">
                        <label class="bank-input-field-title">2. 服務年限 ( 0 - 10 年 )</label>
                        <input class="bank-input-field" type="number" id="input_Tenure" data-feature-name="Tenure" value="8" placeholder="在此輸入您的 服務年限" title="在此輸入您的 服務年限">
                    </div>
                    
                    <div class="input-field-container">
                        <label class="bank-input-field-title">3. 帳戶餘額 ( 0-300000 $ )</label>
                        <input class="bank-input-field" type="number" id="input_Balance" data-feature-name="Balance" value="150000" placeholder="在此輸入您的 餘額" title="在此輸入您的 帳戶餘額">
                    </div>
                    
                    <div class="input-field-container">
                        <label class="bank-input-field-title">4. 估計薪資 ( 0 - 200000 $ )</label>
                        <input class="bank-input-field" type="number" id="input_EstimatedSalary" data-feature-name="EstimatedSalary" value="100000" placeholder="在此輸入您的 估計薪資" title="在此輸入您的 估計薪資">
                    </div>

                    <div class="input-field-container">
                        <label class="bank-input-field-title">5. 信用分數 ( 350 - 850 )</label>
                        <input class="bank-input-field" type="number" id="input_CreditScore" data-feature-name="CreditScore" value="700" placeholder="在此輸入您的 信用分數" title="在此輸入您的 信用分數">
                    </div>

                    <div class="input-field-container dropdown-container" data-dropdown-id="Gender">
                        <label class="bank-input-field-title">6. 生理性別 ( 0 : 男 / 1 : 女 )</label>
                        <input class="bank-input-field dropdown-input" type="text" id="input_Gender" data-feature-name="Gender" data-value="1" value="1 (女)" readonly title="在此選擇您的 生理性別">
                        <div class="dropdown-list bank-hidden">
                            <div class="dropdown-item" data-value="0">0 (男)</div>
                            <div class="dropdown-item" data-value="1">1 (女)</div>
                        </div>
                    </div>
                    
                    <div class="input-field-container dropdown-container" data-dropdown-id="NumOfProducts">
                        <label class="bank-input-field-title">7. 產品數量 ( 1 - 4 )</label>
                        <input class="bank-input-field dropdown-input" type="text" id="input_NumOfProducts" data-feature-name="NumOfProducts" data-value="1" value="1" readonly title="在此選擇您的 產品數量">
                        <div class="dropdown-list bank-hidden">
                            <div class="dropdown-item" data-value="1">1</div>
                            <div class="dropdown-item" data-value="2">2</div>
                            <div class="dropdown-item" data-value="3">3</div>
                            <div class="dropdown-item" data-value="4">4</div>
                        </div>
                    </div>

                    <div class="input-field-container dropdown-container" data-dropdown-id="Geography">
                        <label class="bank-input-field-title">8. 國家 ( 法國 西班牙 德國 )</label>
                        <input class="bank-input-field dropdown-input" type="text" id="input_Geography" data-feature-name="Geography" data-value="0" value="法國" readonly title="在此選擇您的 國家">
                        <div class="dropdown-list bank-hidden">
                            <div class="dropdown-item" data-value="0"> 法國 </div>
                            <div class="dropdown-item" data-value="1"> 西班牙 </div>
                            <div class="dropdown-item" data-value="2"> 德國 </div>
                        </div>
                    </div>

                    <div class="input-field-container dropdown-container" data-dropdown-id="HasCrbank-card">
                        <label class="bank-input-field-title">9. 持有信用卡 ( 0 : 否 / 1 : 是 )</label>
                        <input class="bank-input-field dropdown-input" type="text" id="input_HasCrbank-card" data-feature-name="HasCrbank-card" data-value="1" value="1 (是)" readonly title="在此選擇 是否持有信用卡">
                        <div class="dropdown-list bank-hidden">
                            <div class="dropdown-item" data-value="0">0 (否)</div>
                            <div class="dropdown-item" data-value="1">1 (是)</div>
                        </div>
                    </div>

                    <div class="input-field-container dropdown-container" data-dropdown-id="IsActiveMember">
                        <label class="bank-input-field-title">10. 活躍會員 ( 0 : 否 / 1 : 是 )</label>
                        <input class="bank-input-field dropdown-input" type="text" id="input_IsActiveMember" data-feature-name="IsActiveMember" data-value="1" value="1 (是)" readonly title="在此選擇 是否為活躍會員">
                        <div class="dropdown-list bank-hidden">
                            <div class="dropdown-item" data-value="0">0 (否)</div>
                            <div class="dropdown-item" data-value="1">1 (是)</div>
                        </div>
                    </div>

                </div>

                <div class="bank-input-feature-container"> 
                    <button class="bank-analyze-btn" id="predictOnlyBtn"><svg class="bank-card-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M128 128C128 110.3 113.7 96 96 96C78.3 96 64 110.3 64 128L64 464C64 508.2 99.8 544 144 544L544 544C561.7 544 576 529.7 576 512C576 494.3 561.7 480 544 480L144 480C135.2 480 128 472.8 128 464L128 128zM534.6 214.6C547.1 202.1 547.1 181.8 534.6 169.3C522.1 156.8 501.8 156.8 489.3 169.3L384 274.7L326.6 217.4C314.1 204.9 293.8 204.9 281.3 217.4L185.3 313.4C172.8 325.9 172.8 346.2 185.3 358.7C197.8 371.2 218.1 371.2 230.6 358.7L304 285.3L361.4 342.7C373.9 355.2 394.2 355.2 406.7 342.7L534.7 214.7z"/></svg><label>僅執行模型預測</label></button>
                </div>   
        
            </div>

            <div class="bank-card bank-ai-prompt-panel ">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M400 416C497.2 416 576 337.2 576 240C576 142.8 497.2 64 400 64C302.8 64 224 142.8 224 240C224 258.7 226.9 276.8 232.3 293.7L71 455C66.5 459.5 64 465.6 64 472L64 552C64 565.3 74.7 576 88 576L168 576C181.3 576 192 565.3 192 552L192 512L232 512C245.3 512 256 501.3 256 488L256 448L296 448C302.4 448 308.5 445.5 313 441L346.3 407.7C363.2 413.1 381.3 416 400 416zM440 160C462.1 160 480 177.9 480 200C480 222.1 462.1 240 440 240C417.9 240 400 222.1 400 200C400 177.9 417.9 160 440 160z"/></svg>啟用 Gemini API</div>
                <div class="bank-card-hint" id="apiStatusMsg">請輸入 Key 以啟用 AI 解釋功能。</div>
                <div class="bank-api-key-container">
                    <input class="bank-input-field" type="password" id="bankApiKey" placeholder="在此輸入您的 Gemini API Key..." title="在此輸入您的 Gemini API Key">
                    <button class="bank-analyze-btn bank-margin-left-btn-640px" id="saveApiKeyBtn"  title="啟用 Gemini AI 功能"><svg class="bank-card-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M184 120C184 89.1 209.1 64 240 64L264 64C281.7 64 296 78.3 296 96L296 544C296 561.7 281.7 576 264 576L232 576C202.2 576 177.1 555.6 170 528C169.3 528 168.7 528 168 528C123.8 528 88 492.2 88 448C88 430 94 413.4 104 400C84.6 385.4 72 362.2 72 336C72 305.1 89.6 278.2 115.2 264.9C108.1 252.9 104 238.9 104 224C104 179.8 139.8 144 184 144L184 120zM456 120L456 144C500.2 144 536 179.8 536 224C536 239 531.9 253 524.8 264.9C550.5 278.2 568 305 568 336C568 362.2 555.4 385.4 536 400C546 413.4 552 430 552 448C552 492.2 516.2 528 472 528C471.3 528 470.7 528 470 528C462.9 555.6 437.8 576 408 576L376 576C358.3 576 344 561.7 344 544L344 96C344 78.3 358.3 64 376 64L400 64C430.9 64 456 89.1 456 120z"/></svg><label class="bank-api-key-status">尚未啟用</label></button>
                </div>
                
                <hr class="bank-panel-divider">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M320 544C461.4 544 576 436.5 576 304C576 171.5 461.4 64 320 64C178.6 64 64 171.5 64 304C64 358.3 83.2 408.3 115.6 448.5L66.8 540.8C62 549.8 63.5 560.8 70.4 568.3C77.3 575.8 88.2 578.1 97.5 574.1L215.9 523.4C247.7 536.6 282.9 544 320 544zM192 272C209.7 272 224 286.3 224 304C224 321.7 209.7 336 192 336C174.3 336 160 321.7 160 304C160 286.3 174.3 272 192 272zM320 272C337.7 272 352 286.3 352 304C352 321.7 337.7 336 320 336C302.3 336 288 321.7 288 304C288 286.3 302.3 272 320 272zM416 304C416 286.3 430.3 272 448 272C465.7 272 480 286.3 480 304C480 321.7 465.7 336 448 336C430.3 336 416 321.7 416 304z"/></svg>AI 指令輸入區</div>
                <div class="bank-card-hint">請在下方輸入您希望 AI 如何解釋預測結果。</div>
                <div class="input-field-container">
                    <textarea class="bank-input-field" id="aiPrompt" rows="5" 
                        placeholder="例如: 假設我是客戶經理，請用專業且具體的語言，結合輸入參數解釋流失風險，並提供三個具體的維護行動建議。">請作為一名資產管理顧問，根據客戶的流失機率和輸入特徵，提供一份專業的風險分析報告，包含：1. 風險評估等級。2. 主要風險點。3. 建議採取的客戶留存行動。請使用條列式呈現並且簡單扼要，約500個Tokens內。
                    </textarea>
                </div>
                
                <div class="bank-ai-prompt-container"> 
                    <button class="bank-analyze-btn" id="AiAnalyzeButton" disabled><svg class="bank-card-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M352 64C352 46.3 337.7 32 320 32C302.3 32 288 46.3 288 64L288 128L192 128C139 128 96 171 96 224L96 448C96 501 139 544 192 544L448 544C501 544 544 501 544 448L544 224C544 171 501 128 448 128L352 128L352 64zM160 432C160 418.7 170.7 408 184 408L216 408C229.3 408 240 418.7 240 432C240 445.3 229.3 456 216 456L184 456C170.7 456 160 445.3 160 432zM280 432C280 418.7 290.7 408 304 408L336 408C349.3 408 360 418.7 360 432C360 445.3 349.3 456 336 456L304 456C290.7 456 280 445.3 280 432zM400 432C400 418.7 410.7 408 424 408L456 408C469.3 408 480 418.7 480 432C480 445.3 469.3 456 456 456L424 456C410.7 456 400 445.3 400 432zM224 240C250.5 240 272 261.5 272 288C272 314.5 250.5 336 224 336C197.5 336 176 314.5 176 288C176 261.5 197.5 240 224 240zM368 288C368 261.5 389.5 240 416 240C442.5 240 464 261.5 464 288C464 314.5 442.5 336 416 336C389.5 336 368 314.5 368 288zM64 288C64 270.3 49.7 256 32 256C14.3 256 0 270.3 0 288L0 384C0 401.7 14.3 416 32 416C49.7 416 64 401.7 64 384L64 288zM608 256C590.3 256 576 270.3 576 288L576 384C576 401.7 590.3 416 608 416C625.7 416 640 401.7 640 384L640 288C640 270.3 625.7 256 608 256z"/></svg><label>執行模型預測並取得 AI 解釋</label></button>
                </div>
                
                <hr class="bank-panel-divider">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M420.9 448C428.2 425.7 442.8 405.5 459.3 388.1C492 353.7 512 307.2 512 256C512 150 426 64 320 64C214 64 128 150 128 256C128 307.2 148 353.7 180.7 388.1C197.2 405.5 211.9 425.7 219.1 448L420.8 448zM416 496L224 496L224 512C224 556.2 259.8 592 304 592L336 592C380.2 592 416 556.2 416 512L416 496zM312 176C272.2 176 240 208.2 240 248C240 261.3 229.3 272 216 272C202.7 272 192 261.3 192 248C192 181.7 245.7 128 312 128C325.3 128 336 138.7 336 152C336 165.3 325.3 176 312 176z"/></svg>AI 報告解釋區</div>
                <div class="output-content" id="explanationOutput">
                    <div class="initial-message" id="initialMessage">請先在上方輸入並**啟用**您的 Gemini API Key，然後輸入參數和指令，才能執行分析。</div>
                </div>
                <div  id="errorMsg"></div>  
            </div>

            <div class="bank-card bank-chart-panel">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M420.9 448C428.2 425.7 442.8 405.5 459.3 388.1C492 353.7 512 307.2 512 256C512 150 426 64 320 64C214 64 128 150 128 256C128 307.2 148 353.7 180.7 388.1C197.2 405.5 211.9 425.7 219.1 448L420.8 448zM416 496L224 496L224 512C224 556.2 259.8 592 304 592L336 592C380.2 592 416 556.2 416 512L416 496zM312 176C272.2 176 240 208.2 240 248C240 261.3 229.3 272 216 272C202.7 272 192 261.3 192 248C192 181.7 245.7 128 312 128C325.3 128 336 138.7 336 152C336 165.3 325.3 176 312 176z"/></svg>模型預測結果</div>
                <div class="output-content" id="predictionOutput">
                    <div class="initial-message" id="initialMessage">執行模型預測按鈕，即刻為您判斷客戶流失機率。</div>
                </div>

                <hr class="bank-panel-divider">

                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M96 96C113.7 96 128 110.3 128 128L128 464C128 472.8 135.2 480 144 480L544 480C561.7 480 576 494.3 576 512C576 529.7 561.7 544 544 544L144 544C99.8 544 64 508.2 64 464L64 128C64 110.3 78.3 96 96 96zM304 160C310.7 160 317.1 162.8 321.7 167.8L392.8 245.3L439 199C448.4 189.6 463.6 189.6 472.9 199L536.9 263C541.4 267.5 543.9 273.6 543.9 280L543.9 392C543.9 405.3 533.2 416 519.9 416L215.9 416C202.6 416 191.9 405.3 191.9 392L191.9 280C191.9 274 194.2 268.2 198.2 263.8L286.2 167.8C290.7 162.8 297.2 160 303.9 160z"/></svg>模型內建輸出圖表顯示區</div>
                <div class="chart-display" id="chartDisplay">
                    <div class="initial-message ">圖表 1: **模型全局 SHAP 摘要圖**</div>
                    <div class="initial-message ">圖表 2: **單筆客戶局部 SHAP 影響力**</div>
                </div>
            </div>
        </div>

        <hr class="bank-panel-divider">

        <div class="bank-card-batch-panel-grid">

            <div class="bank-card bank-batch-upload-panel">
                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M128 64C92.7 64 64 92.7 64 128L64 512C64 547.3 92.7 576 128 576L208 576L208 464C208 428.7 236.7 400 272 400L448 400L448 234.5C448 217.5 441.3 201.2 429.3 189.2L322.7 82.7C310.7 70.7 294.5 64 277.5 64L128 64zM389.5 240L296 240C282.7 240 272 229.3 272 216L272 122.5L389.5 240zM296 444C271.7 444 252 463.7 252 488L252 568C252 592.3 271.7 612 296 612L312 612C336.3 612 356 592.3 356 568L356 560C356 549 347 540 336 540C325 540 316 549 316 560L316 568C316 570.2 314.2 572 312 572L296 572C293.8 572 292 570.2 292 568L292 488C292 485.8 293.8 484 296 484L312 484C314.2 484 316 485.8 316 488L316 496C316 507 325 516 336 516C347 516 356 507 356 496L356 488C356 463.7 336.3 444 312 444L296 444zM432 444C403.3 444 380 467.3 380 496C380 524.7 403.3 548 432 548C438.6 548 444 553.4 444 560C444 566.6 438.6 572 432 572L400 572C389 572 380 581 380 592C380 603 389 612 400 612L432 612C460.7 612 484 588.7 484 560C484 531.3 460.7 508 432 508C425.4 508 420 502.6 420 496C420 489.4 425.4 484 432 484L456 484C467 484 476 475 476 464C476 453 467 444 456 444L432 444zM528 444C517 444 508 453 508 464L508 495.6C508 531.1 518.5 565.9 538.2 595.4L543.3 603.1C547 608.7 553.3 612 559.9 612C566.5 612 572.8 608.7 576.5 603.1L581.6 595.4C601.3 565.8 611.8 531.1 611.8 495.6L611.8 464C611.8 453 602.8 444 591.8 444C580.8 444 571.8 453 571.8 464L571.8 495.6C571.8 515.2 567.7 534.5 559.8 552.3C551.9 534.5 547.8 515.2 547.8 495.6L547.8 464C547.8 453 538.8 444 527.8 444z"/></svg>批次 CSV 分析</div>
                <div class="bank-card-hint">上傳包含客戶資料的 CSV 檔案進行批次預測。</div>
                <div class="bank-batch-upload-container">
                    <input class="bank-analyze-btn" type="file" id="bankCsvFileInput" accept=".csv" title="在此選擇您的 CSV 檔案">
                    <button class="bank-analyze-btn bank-margin-left-btn-640px" id="uploadBatchBtn"><svg class="bank-card-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M352 173.3L352 384C352 401.7 337.7 416 320 416C302.3 416 288 401.7 288 384L288 173.3L246.6 214.7C234.1 227.2 213.8 227.2 201.3 214.7C188.8 202.2 188.8 181.9 201.3 169.4L297.3 73.4C309.8 60.9 330.1 60.9 342.6 73.4L438.6 169.4C451.1 181.9 451.1 202.2 438.6 214.7C426.1 227.2 405.8 227.2 393.3 214.7L352 173.3zM320 464C364.2 464 400 428.2 400 384L480 384C515.3 384 544 412.7 544 448L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 448C96 412.7 124.7 384 160 384L240 384C240 428.2 275.8 464 320 464zM464 488C477.3 488 488 477.3 488 464C488 450.7 477.3 440 464 440C450.7 440 440 450.7 440 464C440 477.3 450.7 488 464 488z"/></svg><label>上傳並批次預測</label></button>
                </div>
            </div>

            <div class="bank-card bank-batch-result-panel">
                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M352 224L352 320L480 320L480 224L352 224zM288 224L160 224L160 320L288 320L288 224zM96 384L96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 384zM480 384L352 384L352 480L480 480L480 384zM288 480L288 384L160 384L160 480L288 480z"/></svg>批次分析結果列表</div>
                
                <div class="bank-filter-controls">
                    
                    <div class="bank-filter-controls-container">
                        <label for="idSearchInput">ID 搜索:</label>
                        <input class="bank-input-field " type="text" id="idSearchInput" placeholder="輸入 ID 快速搜索...">
                    </div>
                    
                    <div class="bank-filter-controls-container">
                        <label for="thresholdInput">篩選流失機率大於：</label>
                        <input class="bank-input-field" type="number" id="thresholdInput" value="50" min="0" max="100" style="width: 70px;">
                        <label >%</label>
                        <button id="filterDataBtn" class="bank-analyze-btn bank-margin-left-btn">
                        <label>執行篩選</label> 
                        </button>
                    </div>
                    
                    <div class="bank-card-hint-hidden" id="filterStats"></div>
                </div>
                
                <div class="table-wrapper">
                    <table class="fl-table">
                        <thead>
                            <tr>
                                <th data-sort-key="id" data-sort-order="none">
                                    ID<label class="sort-icon"></label>
                                </th>
                                <th data-sort-key="probability" data-sort-order="none">
                                    流失機率<label class="sort-icon"></label>
                                </th>
                                <th data-sort-key="risk" data-sort-order="none">
                                    風險等級<label class="sort-icon"></label>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="batchResultBody">
                            <tr><td colspan="3" class="bank-card-hint">請上傳 CSV 檔案進行批次分析</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination-controls" id="paginationControls">
                    <button id="prevPageBtn" class="bank-analyze-btn"><label>上一頁</label></button>
                    <label for="pageInput" class="text-gray-700">前往:</label>
                    <input class="bank-input-field" type="number" id="pageInput" value="1" min="1">
                    <span id="pageInfo" class="text-gray-700"> / ?</span>
                    <button id="nextPageBtn" class="bank-analyze-btn"><label>下一頁</label></button>
                </div>

            </div>

            <div class="bank-card bank-batch-feature-panel">
                <div class="bank-card-title"><svg class="bank-card-title-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M352 224L352 320L480 320L480 224L352 224zM288 224L160 224L160 320L288 320L288 224zM96 384L96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 384zM480 384L352 384L352 480L480 480L480 384zM288 480L288 384L160 384L160 480L288 480z"/></svg>批次分析單筆客戶特徵</div>
                
                <div class="bank-card-hint">請點擊批次分析結果列表中的任一列，以查看詳細特徵。</div>
                <div id="featureGrid">
                    <div class="feature-item">
                        <p class="feature-item-label">客戶 ID</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">年齡</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">信用分數</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">年資</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">帳戶餘額</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">產品數量</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">信用卡</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">活躍會員</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">預估薪資</p>
                        <span class="feature-item-value">---</span>
                    </div>
                    <div class="feature-item">
                        <p class="feature-item-label">地理位置</p>
                        <span class="feature-item-value">---</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="fabColorControl"> 
        <svg id="fabIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="currentColor" d="M576 320C576 320.9 576 321.8 576 322.7C575.6 359.2 542.4 384 505.9 384L408 384C381.5 384 360 405.5 360 432C360 435.4 360.4 438.7 361 441.9C363.1 452.1 367.5 461.9 371.8 471.8C377.9 485.6 383.9 499.3 383.9 513.8C383.9 545.6 362.3 574.5 330.5 575.8C327 575.9 323.5 576 319.9 576C178.5 576 63.9 461.4 63.9 320C63.9 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320zM192 352C192 334.3 177.7 320 160 320C142.3 320 128 334.3 128 352C128 369.7 142.3 384 160 384C177.7 384 192 369.7 192 352zM192 256C209.7 256 224 241.7 224 224C224 206.3 209.7 192 192 192C174.3 192 160 206.3 160 224C160 241.7 174.3 256 192 256zM352 160C352 142.3 337.7 128 320 128C302.3 128 288 142.3 288 160C288 177.7 302.3 192 320 192C337.7 192 352 177.7 352 160zM448 256C465.7 256 480 241.7 480 224C480 206.3 465.7 192 448 192C430.3 192 416 206.3 416 224C416 241.7 430.3 256 448 256z"/></svg> 
        <div id="fabContent"> 
            <div class="fab-panel-title">背景顏色調整</div> 
            <div class="fab-sliders"> 
                <label>R: <span id="fabValR">128</span></label> 
                <input type="range" id="fabRangeR" min="0" max="255" value="128"> 
                <label>G: <span id="fabValG">128</span></label> 
                <input type="range" id="fabRangeG" min="0" max="255" value="128"> 
                <label>B: <span id="fabValB">128</span></label> 
                <input type="range" id="fabRangeB" min="0" max="255" value="128"> 
                <label>A: <span id="fabValA">1</span></label> 
                <input type="range" id="fabRangeA" min="0" max="1" step="0.01" value="1"> 
            </div>
            <div class="fab-themes"> 
                <button class="fab-theme-btn" data-color="rgba(0,0,0,1)">黑色</button>
                <button class="fab-theme-btn" data-color="rgba(85,85,85,1)">深色</button>
                <button class="fab-theme-btn" data-color="rgba(128,128,128,1)">灰色</button>
            </div>
            <div class="fab-themes"> 
                <button class="fab-theme-btn" data-color="rgba(170,170,170,1)">淺色</button>
                <button class="fab-theme-btn" data-color="rgba(255,255,255,1)">白色</button>
                <button class="fab-theme-btn" id="fabRandomButton">隨機</button>       
            </div> 
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/topbar_menu.js') }}"></script>
    <script src="{{ url_for('static', filename='js/customer_churn_bank.js') }}"></script>
    <script src="{{ url_for('static', filename='js/fab_color_control.js') }}"></script>

</body>
</html>