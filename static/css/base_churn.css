/* base_Churn.css - 單層 TopBar 結構 (通用骨架，不含內容佈局) */

:root {
    /* --- 導航欄固定參數 (僅保留 Primary TopBar) --- */
    --topbar-primary-height: 50px;                                              /* 主導航欄的固定高度 */
    
    /* JS 會更新這些變數以反映實際高度 */
    /* 次導航欄已移除，現在總高度只取 Primary TopBar 的高度 */
    --current-total-header-height: var(--topbar-primary-height); 
    
    --spacing: 15px; /* 通用間距變數 */

    /* --- Color_BG_Control.js 預期提供的動態顏色備用值 (僅用於頁面內容和卡片) --- */
    --global-theme-color: #f4f7f9; /* 頁面背景色 (由 JS 控制，用於 body) */
    --global-font-color: #333333;  /* 頁面文字色 (由 JS 控制，用於 body) */
    --panel-bg-color: #ffffff;     /* 卡片背景色 (由 JS 控制) */
    --panel-font-color: rgba(0, 0, 0, 1);  /* 卡片文字色 (由 JS 控制) */
    
    /* --- 固定 TopBar 顏色定義 (不隨主題動態變更) --- */
    --FIXED-PRIMARY-COLOR: rgba(85, 85, 85, 1);      /* 固定強調色/品牌色 (藍紫) */
    --FIXED-TOPBAR-BG: rgba(0, 0, 0, 1);             /* 固定主導航欄背景 (白色) */
    --FIXED-TOPBAR-FONT: rgba(0, 128, 128, 1);       /* 固定導航欄文字/Icon 預設色 (深黑) */
    /* 已移除：--FIXED-SECONDARY-BG, --FIXED-INPUT-COLOR 等 API 相關變數 */

    /* --- 舊的動態變數 (僅保留名稱，將其指向固定值或用於頁面內容) --- */
    --header-font-color: var(--FIXED-PRIMARY-COLOR);                       /* 頁面標題色使用固定強調色 */
    --primary-color: var(--header-font-color);                             /* 主色使用標題色 (即固定強調色) */
    --text-color: var(--FIXED-TOPBAR-FONT);                                /* 預設文字色 */
    --active-bg-color: var(--header-font-color);                           /* 活躍背景色使用強調色 */
    --topbar-primary-bg: var(--FIXED-TOPBAR-BG);                           /* 主導航欄背景使用固定值 */
}

/* --- 全域設置 (配合 Color_BG_Control.js) --- */
body {
    margin: 0;                                                             /* 移除瀏覽器預設外邊距 */
    padding: 0;                                                            /* 移除瀏覽器預設內邊距 */
    font-family: "Inter", "PingFang TC", "Microsoft JhengHei", "Noto Sans TC", sans-serif;
    min-height: 100vh;                                                     /* 確保內容至少佔滿整個視窗高度 */
    box-sizing: border-box;                                                /* 邊框模型設定為 border-box */
    
    /* 關鍵：從 JS 獲取背景和文字顏色 (這部分仍響應主題) */
    background-color: var(--global-theme-color);                           /* 頁面背景色使用動態主題色 */
    color: var(--global-font-color);                                       /* 頁面文字色使用動態主題色 */
    
    /* 確保主題切換時平滑過渡 */
    transition: background-color 0.5s linear, color 0.5s linear;
}

/* -------------------------------------- */
/* --- 1. 頂部導航欄 (主層: topbar-primary) --- */
/* -------------------------------------- */
.topbar {
    position: fixed;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    padding: 0 var(--spacing);
    transition: box-shadow 0.2s;
}

.topbar-primary {
    top: 0;
    height: var(--topbar-primary-height);
    background-color: var(--FIXED-TOPBAR-BG);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.toggle-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--FIXED-PRIMARY-COLOR);
    font-size: 1.1rem;
    padding: 5px;
    margin-right: 15px;
    transition: transform 0.3s;
    flex-shrink: 0;
}

.topbar.collapsed .toggle-btn {
    transform: rotate(180deg);
}

.brand {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--FIXED-TOPBAR-FONT);
    display: flex;
    align-items: center;
    white-space: nowrap;
    margin-right: 20px;
    transition: margin 0.3s;
    flex-shrink: 0;
}

.brand i {
    font-size: 1.5rem;
    margin-right: 10px;
}

.topbar.collapsed .brand-text {
    display: none;
}

.topbar.collapsed .brand {
    margin-right: 10px;
}

.nav-links {
    display: flex;
    align-items: center;
    gap: 5px;
    flex-grow: 1;
    overflow-x: hidden;
    white-space: nowrap;
    min-width: 0;
}

.menu-item {
    text-decoration: none;
    flex-shrink: 0;
}

.menu-button {
    display: flex;
    align-items: center;
    height: 40px;
    padding: 8px 12px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--FIXED-TOPBAR-FONT) !important;
    font-size: 0.9rem;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.menu-button i {
    font-size: 1.1rem;
    margin-right: 8px;
    transition: margin 0.3s;
}

.menu-item:hover .menu-button {
    background-color: color-mix(in srgb, var(--FIXED-PRIMARY-COLOR) 10%, transparent);
    color: var(--FIXED-PRIMARY-COLOR);
}

.menu-item.active .menu-button {
    background-color: var(--FIXED-PRIMARY-COLOR);
    color: white;
}

.menu-item.active:hover .menu-button {
    background-color: color-mix(in srgb, var(--FIXED-PRIMARY-COLOR) 90%, black);
}

.topbar.collapsed .menu-text {
    display: none;
}

.topbar.collapsed .menu-button {
    padding: 8px 10px;
}

.topbar.collapsed .menu-button i {
    margin-right: 0;
}

/* -------------------------------------- */
/* --- 2. 頂部導航欄 (次層: topbar-secondary - **已移除**) --- */
/* -------------------------------------- */
/* 相關樣式已被移除 */

/* -------------------------------------- */
/* --- 3. 主要內容區域 (容器) --- */
/* -------------------------------------- */
.main-content {
    /* 現在 padding-top 直接使用 Primary TopBar 的高度 + 10px 間距 */
    padding-top: calc(var(--current-total-header-height) + 10px);
    padding-left: var(--spacing);
    padding-right: var(--spacing);
    /* 總高度計算也僅基於 Primary TopBar */
    min-height: calc(100vh - var(--current-total-header-height) - 10px);
    box-sizing: border-box;
    width: 100%;
}

/* -------------------------------------- */
/* === 響應式設計 (Media Queries 僅處理 TopBar) === */
/* -------------------------------------- */
@media (max-width: 900px) {
    .topbar:not(.collapsed) .brand-text,
    .topbar:not(.collapsed) .menu-text {
        display: none;
    }
    .topbar:not(.collapsed) .menu-button {
        padding: 8px 10px;
    }
    .topbar:not(.collapsed) .menu-button i {
        margin-right: 0;
    }
    .topbar:not(.collapsed) .toggle-btn {
        transform: rotate(180deg);
    }
}

@media (max-width: 600px) {
    .topbar-primary {
        height: auto;
        padding-top: 5px;
        padding-bottom: 5px;
        flex-wrap: wrap;
        overflow-x: hidden;
        align-items: center;
    }

    .nav-links {
        width: auto;
        order: unset;
        flex-grow: 1;
        justify-content: flex-start;
        padding: 5px 0;
        flex-wrap: wrap;
        white-space: normal;
        min-width: unset;
    }

    .brand {
        order: unset;
        margin-right: var(--spacing);
    }
    
    .toggle-btn {
        order: unset;
        margin-left: 0;
        margin-right: var(--spacing);
    }

    /* 已移除：topbar-secondary 的 media query 調整 */
}