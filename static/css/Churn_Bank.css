/* Churn_Bank.css - éŠ€è¡Œå®¢æˆ¶æµå¤±é æ¸¬é é¢ç‰¹å®šæ¨£å¼ (å‚ç›´ä½ˆå±€) */

/* -------------------------------------- */
/* --- 0. éŸ¿æ‡‰å¼å­—é«”åŸºç·šèª¿æ•´ --- */
/* -------------------------------------- */

/* èª¿æ•´ä¸»é«”å­—é«”å¤§å°ï¼Œä½¿ç”¨ clamp ç¢ºä¿å­—é«”åœ¨ 0.875rem (å°) åˆ° 1rem (å¤§) ä¹‹é–“æµ®å‹• */
body {
    font-size: clamp(0.875rem, 0.8vw + 0.5rem, 1rem);
}


/* ç¢ºä¿æ‰€æœ‰æ¨™é¡Œä¹Ÿä½¿ç”¨é€™å€‹é«˜å°æ¯”é¡è‰² (å¼·èª¿è‰²/ä¸»é¡Œè‰²) */
h1, h2, h3, h4, h5, h6 {
    color: var(--header-font-color); /* è¨­å®šæ¨™é¡Œæ–‡å­—é¡è‰²ç‚ºä¸»é¡Œå®šç¾©çš„é«˜å°æ¯”è‰² */
    transition: color 0.5s linear;    /* è¨­å®šé¡è‰²è®ŠåŒ–çš„éæ¸¡æ•ˆæœï¼Œä»¥ä¾¿åœ¨ä¸»é¡Œåˆ‡æ›æ™‚å¹³æ»‘éæ¸¡ */
}

/* -------------------------------------- */
/* --- 1. é€šç”¨å…ƒä»¶æ¨£å¼ (å¾ base æå–/ä¿®æ”¹) --- */
/* -------------------------------------- */

/* é€šç”¨å¡ç‰‡å®¹å™¨ */
.card {
    background-color: var(--panel-bg-color); 
    color: var(--panel-font-color);           
    padding: var(--spacing);                  
    border-radius: 8px;                       
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
    transition: background-color 0.5s linear, color 0.5s linear; 
    margin-bottom: var(--spacing); /* æ–°å¢ï¼šå¡ç‰‡é–“è· */
}

/* é é¢ä¸»è¦æ¨™é¡Œ */
.page-title {
    /* ä½¿ç”¨ clamp ç¢ºä¿ H1 å­—é«”å¤§å°åœ¨ 1.5rem (å°) åˆ° 2rem (å¤§) ä¹‹é–“æµ®å‹• */
    font-size: clamp(1.5rem, 2vw + 0.5rem, 2rem); 
    font-weight: 700;    
    margin-bottom: 1.5rem; 
    color: var(--header-font-color) !important; 
}

/* å¡ç‰‡å…§æ¨™é¡Œ */
.card-title {
    /* ä½¿ç”¨ clamp ç¢ºä¿ H2 å­—é«”å¤§å°åœ¨ 1rem (å°) åˆ° 1.25rem (å¤§) ä¹‹é–“æµ®å‹• */
    font-size: clamp(1rem, 1.5vw + 0.5rem, 1.25rem); 
    font-weight: 600;   
    margin-bottom: 1rem; 
    color: var(--panel-font-color) !important; 
}

/* è¼¸å…¥æ¬„ä½ç¾¤çµ„ */
.input-group {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* èª¿æ•´ç‚ºå…©æ¬„ä½ˆå±€ */
    gap: 1rem; /* å¢åŠ é–“è· */
}

.input-field-container {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

/* æ¨™ç±¤æ¨£å¼ */
.input-field-container label {
    font-size: 0.875rem; /* ä¿æŒé€™å€‹ç›¸å°è¼ƒå°çš„å­—é«”ï¼Œä½†å®ƒæœƒç¹¼æ‰¿ body çš„åŸºç·šè®ŠåŒ– */
    font-weight: 500;    
    color: var(--global-font-color) !important; 
}

/* é€šç”¨è¼¸å…¥æ¡†å’Œæ–‡æœ¬å€åŸŸ */
.theme-input-field {
    background-color: var(--panel-bg-color); 
    color: var(--panel-font-color); 
    border: 1px solid color-mix(in srgb, var(--panel-font-color) 30%, transparent); 
    transition: background-color 0.5s linear, color 0.5s linear, border-color 0.3s; 

    width: 100%; 
    padding: 0.5rem; 
    border-radius: 0.375rem; 
    font-size: 0.875rem; /* ä¿æŒé€™å€‹ç›¸å°è¼ƒå°çš„å­—é«”ï¼Œä½†å®ƒæœƒç¹¼æ‰¿ body çš„åŸºç·šè®ŠåŒ– */
    box-sizing: border-box; 
    /* ç¢ºä¿ textarea å°ºå¯¸ä¸æœƒäº‚è·‘ */
    resize: vertical; 
}

/* è¼¸å…¥æ¡† Focus (èšç„¦ç‹€æ…‹) */
.theme-input-field:focus {
    border-color: var(--primary-color); 
    outline: none; 
    box-shadow: 0 0 0 1px var(--primary-color); 
}

/* åˆ†ææŒ‰éˆ• (ç”¨æ–¼ Analyze å’Œ Save API Key) */
.analyze-btn {
    width: auto; /* ä¸å¼·åˆ¶æ»¿å¯¬ */
    margin-top: 0; 
    background-color: var(--header-font-color); 
    color: var(--panel-bg-color); 
    font-weight: 600; 
    padding: 0.625rem 1rem; 
    border-radius: 0.5rem; 
    transition: background-color 0.3s, opacity 0.3s; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    border: none; 
    cursor: pointer; 
    text-decoration: none; 
}

/* éŒ¯èª¤è¨Šæ¯ */
.error-message {
    color: var(--error-color, #ef4444); 
    /* èª¿æ•´å­—é«”å¤§å°ï¼Œä¿æŒç›¸å°è¼ƒå° */
    font-size: clamp(0.75rem, 0.7vw + 0.5rem, 0.875rem); 
    margin-top: 0.5rem; 
}

/* é æ¸¬çµæœæ¨£å¼ */
.prediction-result {
    border-left: 5px solid var(--primary-color);
    padding-left: 10px;
    margin-bottom: 15px;
}
.prob-value {
    /* èª¿æ•´é‡é»æ•¸å€¼å­—é«”å¤§å° */
    font-size: clamp(1.25rem, 2vw + 1rem, 1.5rem);
    font-weight: 800;
}
.high-risk {
    color: var(--error-color, #ef4444);
}
.low-risk {
    color: var(--success-color, #10b981);
}

.card-divider {
    border: 0;
    height: 1px;
    background-color: color-mix(in srgb, var(--panel-font-color) 20%, transparent);
    margin: 1.5rem 0;
}

/* -------------------------------------- */
/* --- 2. ä½ˆå±€èª¿æ•´ (éŸ¿æ‡‰å¼é¢æ¿ä½ˆå±€) --- */
/* -------------------------------------- */

/* å¤§è¦–çª—ä½ˆå±€ (>= 1024px) */
.main-panel-grid {
    display: grid;
    /* ğŸŒŸ æ–°å¢ï¼šç¢ºä¿ Grid å®¹å™¨æœ‰è¶³å¤ çš„é«˜åº¦è®“ 1fr ç”Ÿæ•ˆ */
    min-height: 85vh; 
    /* å·¦é‚Šæ¬„ä½ä½” 1 ä»½ï¼Œå³é‚Šæ¬„ä½ä½” 1 ä»½ï¼Œå½¢æˆé›™æ¬„ç­‰å¯¬ä½ˆå±€ */
    grid-template-columns: 1fr 1fr; 
    gap: var(--spacing); /* æ¬„ä½é–“è· */
    /* ğŸŒŸ ä¿®æ”¹ï¼šå‰å…©è¡Œ auto (ç”±å…§å®¹æ±ºå®š)ï¼Œç¬¬ä¸‰è¡Œ 1fr (ä½”æ»¿å‰©é¤˜ç©ºé–“) */
    grid-template-rows: auto auto 1fr; 
    /* å®šç¾© row å€å¡Š */
    grid-template-areas: 
        "api_key chart_panel"   /* ç¬¬ä¸€è¡Œ: API Key (auto) */
        "input_prompt chart_panel" /* ç¬¬äºŒè¡Œ: è¼¸å…¥/æŒ‡ä»¤ (auto) */
        "explanation chart_panel"; /* ç¬¬ä¸‰è¡Œ: è§£é‡‹/å»ºè­° (1fr) + åœ–è¡¨ (è·¨ä¸‰è¡Œ) */
}

.api-key-panel    { grid-area: api_key; }
.input-and-prompt-panel { grid-area: input_prompt; }
.explanation-panel    { grid-area: explanation; }
.chart-panel        { grid-area: chart_panel; }


/* API Key å€å¡Šèª¿æ•´ */
.api-key-panel .api-key-container {
    display: flex;
    gap: 10px;
    align-items: center;
}

.api-key-panel .api-key-container .theme-input-field {
    flex-grow: 1;
    max-width: 400px;
}
/* ç¸½è¼¸å…¥å€å¡Šï¼ŒåŒ…å«åƒæ•¸å’Œ Prompt */
.input-and-prompt-panel {
    max-width: 100%; 
}

/* AI è§£é‡‹å€å¡Š */
.explanation-panel {
    /* ğŸŒŸ ä¿®æ”¹ï¼šç§»é™¤ min-heightï¼Œä¸¦è¨­å®š height: 100% ä½”æ»¿å…¶ 1fr è¡Œç©ºé–“ */
    /* min-height: 250px; <- å·²ç§»é™¤ */
    height: 100%; /* ç¢ºä¿å¡«æ»¿ grid row çš„ 1fr ç©ºé–“ */
    /* ç”±æ–¼é€™æ˜¯è§£é‡‹å€ï¼Œå…§å®¹å¯èƒ½å¾ˆé•·ï¼Œæˆ‘å€‘å°‡å…¶å…§å®¹è¨­ç‚ºå¯æ»¾å‹• */
    overflow-y: auto;
}

/* åœ–è¡¨é¡¯ç¤ºå€å¡Š */
.chart-panel {
    /* ç”±æ–¼ chart_panel ä½”ç”¨ grid-area: chart_panel (ä¸‰è¡Œç©ºé–“) */
    /* æˆ‘å€‘å°‡å…¶é«˜åº¦è¨­ç‚º 100%ï¼Œä»¥ç¢ºä¿å®ƒèƒ½å¡«æ»¿ä¸‰è¡Œçš„ç¸½é«˜åº¦ */
    height: 100%; 
    /* ä¿æŒå…§å®¹å¯ä»¥æ»¾å‹•ï¼Œä»¥ä¾¿åœ¨å…§å®¹è¶…éè¦–çª—æ™‚æŸ¥çœ‹ */
    overflow-y: auto;
}

.chart-display {
    display: flex; 
    flex-direction: column; 
    gap: var(--spacing); 
}

.chart-placeholder {
    height: 300px; 
    background-color: color-mix(in srgb, var(--panel-bg-color) 80%, var(--global-theme-color)); 
    border: 1px dashed var(--global-font-color); 
    display: flex; 
    flex-direction: column;
    align-items: center; 
    justify-content: center; 
    color: var(--global-font-color); 
    opacity: 0.7; 
    border-radius: 4px; 
    padding: 15px;
}

.loading-spinner {
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3; 
    border-top: 3px solid var(--primary-color); 
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 8px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* -------------------------------------- */
/* --- 3. éŸ¿æ‡‰å¼è¨­è¨ˆ (å°è¦–çª—å–®æ¬„å †ç–Š) --- */
/* -------------------------------------- */

/* å°æ–¼ 1024px æ™‚åˆ‡æ›ç‚ºå–®æ¬„ä½ˆå±€ (å…¨éƒ¨å‚ç›´å †ç–Š) */
@media (max-width: 1024px) {
    .main-panel-grid {
        display: flex;
        flex-direction: column;
        gap: var(--spacing);
        /* ç§»é™¤ grid-area å®šç¾©ï¼Œè®“æ‰€æœ‰å…ƒç´ æŒ‰ HTML é †åºå †ç–Š */
        grid-template-columns: 1fr;
        grid-template-rows: unset; /* å–æ¶ˆ 1fr è¨­ç½® */
        grid-template-areas: none;
        min-height: unset; /* å–æ¶ˆå¤§è¢å¹•çš„æœ€å°é«˜åº¦é™åˆ¶ */
    }
    /* å°è¢å¹•ä¸‹ï¼Œæ‰€æœ‰é¢æ¿å›æ­¸å…§å®¹é©…å‹•é«˜åº¦ */
    .explanation-panel, .chart-panel {
        height: auto;
        overflow-y: visible;
    }
}

/* æ›´å°çš„è¦–çª—èª¿æ•´ (ä¾‹å¦‚æ‰‹æ©Ÿ) */
@media (max-width: 600px) {
    .input-group {
        grid-template-columns: 1fr; /* å°è¢å¹•æ”¹ç‚ºå–®æ¬„ */
    }
    .api-key-panel .api-key-container {
        flex-direction: column;
        align-items: stretch;
    }
    .api-key-panel .api-key-container .theme-input-field {
        max-width: unset;
    }
}